#!/bin/sh

# Dash-CPP内置命令测试脚本

# 1. 输出测试标题
echo "============================================"
echo "Dash-CPP Shell 内置命令测试"
echo "============================================"

echo "【注意】这个脚本只执行安全的测试，需要交互的测试仅显示说明"

# 2. 测试echo命令的各种选项
echo "============================================"
echo "测试echo命令..."
echo "基本输出: Hello World"
echo -n "不换行输出: "
echo "接着上一行"
echo -e "转义字符: \t制表符 \n换行"
echo "============================================"

# 3. 测试pwd命令
echo "============================================"
echo "测试pwd命令..."
pwd
echo "============================================"

# 4. 测试cd命令的基本用法
echo "============================================"
echo "测试cd命令..."
echo "当前目录:"
pwd
echo "相对路径cd测试："
cd scripts
echo "进入scripts目录:"
pwd
cd ..
echo "返回上级目录:"
pwd
echo ""
echo "其他cd命令用法 (需手动测试):"
echo "cd   - 切换到HOME目录"
echo "cd - - 切换到前一个目录"
echo "cd ~user - 切换到指定用户的HOME目录"
echo "============================================"

# 5. 测试help命令
echo "============================================"
echo "测试help命令..."
echo "手动测试步骤:"
echo "help        - 显示所有命令帮助"
echo "help cd     - 显示cd命令帮助"
echo "help source - 显示source命令帮助"
echo "============================================"

# 6. 测试history命令
echo "============================================"
echo "测试history命令..."
echo "手动测试步骤:"
echo "history     - 显示命令历史"
echo "history 10  - 显示最近10条命令"
echo "============================================"

# 7. 测试jobs命令
echo "============================================"
echo "测试jobs命令..."
echo "手动测试步骤:"
echo "1. sleep 10 & - 启动后台作业"
echo "2. jobs       - 显示作业列表"
echo "3. jobs -l    - 显示带PID的详细列表"
echo "============================================"

# 8. 测试debug命令
echo "============================================"
echo "测试debug命令..."
echo "手动测试步骤:"
echo "debug status    - 显示调试状态"
echo "debug on        - 开启所有调试"
echo "debug off       - 关闭所有调试"
echo "debug command on - 开启命令调试"
echo "============================================"

# 9. 测试kill命令
echo "============================================"
echo "测试kill命令..."
echo "手动测试步骤:"
echo "1. sleep 30 &   - 启动后台作业"
echo "2. kill %1      - 终止后台作业"
echo "============================================"

# 10. 测试source命令
echo "============================================"
echo "测试source命令..."
echo "创建一个简单的测试文件:"
echo 'echo "这是通过source执行的脚本"' > source_test.txt
echo "执行source命令:"
source source_test.txt
rm source_test.txt
echo "============================================"

# 11. 测试wait命令
echo "============================================"
echo "测试wait命令..."
echo "手动测试步骤:"
echo "1. sleep 5 &   - 启动后台作业"
echo "2. wait %1     - 等待后台作业完成"
echo "============================================"

# 12. 测试exit命令
echo "============================================"
echo "测试exit命令..."
echo "手动测试步骤:"
echo "exit       - 退出shell"
echo "exit 1     - 带状态码退出shell"
echo "============================================"

echo "内置命令测试完成!"
echo "注意：许多测试需要在交互模式下手动执行" 